<!doctype html>
<html lang="en" class="no-js">

<script type="text/javascript" src="/assets/js/css-pop.js"></script>
<script type="text/javascript" src="/assets/js/jquery-2.1.4.js"></script>
<script type="text/javascript" src="/assets/js/main.js"></script>
<script type="text/javascript" src="/assets/js/jquery.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/js/modernizr.js"></script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.9.24/paper-full.min.js"></script>
<link type="text/css" rel="stylesheet" href="/assets/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="/assets/css/button.css">
<link type="text/css" rel="stylesheet" href="/assets/css/canvas.css">
<link type="text/css" rel="stylesheet" href="/assets/css/chat.css">
<link type="text/css" rel="stylesheet" href="/assets/css/reset.css">
<link type="text/css" rel="stylesheet" href="/assets/css/style.css">
<link type="text/css" rel="stylesheet" href="/assets/css/simple-sidebar.css" >
<link rel="stylesheet" rel="stylesheet" href="/assets/css/responsive.css" >




<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>




<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">  	
	<title>Awesome Whiteboard</title>
</head>
<body >
		

		<div id="welcome_popup"> 

			 <label>Name: </label>
			 	<input type="text" name="name" id="um" class="inName">
			 	<button type="submit" class="btn btn-default" id="sub" >Submit</button>
		</div>

		<div id="welcome_cover" > </div> 
		 <div id="popup"> 
			 <p id="url"></p>
		  <a href="#" class="cancel">&times;</a> </div> 
		<div id="cover" > </div> 

		

<canvas id="myCan" class="myCanvas" >
</canvas>
		

	<nav class="cd-stretchy-nav menuuu hvr-grow">

		<a class="cd-nav-trigger " href="#0">
			<span aria-hidden="true"></span>
		</a>

		<ul>
			<li><a href="#popup"><span>Share Room</span></a></li>
			<li><a href="#0" class="menu-toggle"><span>Chat</span></a></li>
			<li><a id="downloadLnk" download="YourDrawing.png"><span>Save Board</span></a></li>
		</ul>

		<span aria-hidden="true" class="stretchy-nav-bg"></span>
	</nav>
	
	<nav class="cd-stretchy-nav penstyle hvr-grow " >
		<img src="/assets/pencil.svg" class="cd-nav-trigger" width="100%" height="100%">
		
		<ul>
			<li><a class="pen" href="#0" onclick="BLACK();"><span></span></a></li>
			<li><a class="pen" href="#0" onclick="RED();"><span></span></a></li>
			<li><a class="pen" href="#0" onclick="YELLOW();"><span></span></a></li>
			<li><a class="pen" href="#0" onclick="GREEN();"><span></span></a></li>
			<li><a class="pen" href="#0" onclick="BLUE();"><span></span></a></li>
			
		</ul>

		<span aria-hidden="true" class="stretchy-nav-bg"></span>
	</nav>
	<nav class="cd-stretchy-nav pensize hvr-grow "  >
		<img src="/assets/size.svg" class="cd-nav-trigger" width="50%" height="50%">
		
		<ul>
			<li><a  href="#0" onclick="large();"><span></span></a></li>
			<li><a  href="#0" onclick="medium();"><span></span></a></li>
			<li><a  href="#0" onclick="small();"><span></span></a></li>
			
		</ul>

		<span aria-hidden="true" class="stretchy-nav-bg"></span>
	</nav>
	
	
	<button onclick="erase()" type="button" id="erase" class="btn btn-success btn-circle btn-xl " ><img src="/assets/eraser.svg" alt="eraser" width="100%" height="100%"></button>
		<div id="wrapper">
							

		        <!-- Sidebar -->
		        <div id="sidebar-wrapper" >

							<div id="upperChat">
							<h id="user" style="text-overflow: ellipsis;"></h>
				             <a href="#" class="menu-toggle" id="hidechev"><span class="glyphicon glyphicon-chevron-left"></span></a>
							</div>
							<div id="lowerChat">
						    		<input class="textarea" type="text" id="m" value="" placeholder="Type here!"/>
									<button type="button" onclick="return submitfunction();" class="btn btn-default send" ><span class="glyphicon glyphicon-send" > </span></button>
						    </div>
						    <ol id="messages" class="chat">
						    	
						    </ol>
						    
						   <!-- <form >-->
						    <!--</form>-->
		    
		      		  </div>
		        </div>
  

  
</body>
</html>
<script type="text/javascript">

   $("#sub").click(function(e) {
       document.getElementById('welcome_popup').style.display='none';
       document.getElementById('welcome_cover').style.display='none';
    });
    $(".menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
     $("#erase").click(function(e) {
       document.getElementById('myCan').style.cursor="url(../assets/eraser.png) 0 30 , auto";
    });
     $(".pen").click(function(e) {
       document.getElementById('myCan').style.cursor="url(../assets/pen.png) 0 30 , auto";
    });

document.getElementById("downloadLnk").addEventListener("click", function() {
	
	//get the canvas
	var canvas = document.getElementById("myCan");
	//get the canvas context
	var context = canvas.getContext("2d");

	//cache height and width        
   	var w = canvas.width;
    	var h = canvas.height;

        //store the current globalCompositeOperation
        var compositeOperation = context.globalCompositeOperation;

        //To draw behind the current drawing
        context.globalCompositeOperation = "destination-over";

        //set background color to white
        context.fillStyle = '#FFFFFF';

        //draw background / rect on entire canvas
        context.fillRect(0,0,w,h);
	
	//get image data from canvas
	var img = canvas.toDataURL();
	
	//Set href to the image to downtload it on click
    	this.href = img;      

        //reset the globalCompositeOperation to what it was
        context.globalCompositeOperation = compositeOperation;
},false);

</script>
<script type="text/javascript" src="/assets/chat.js"></script>


